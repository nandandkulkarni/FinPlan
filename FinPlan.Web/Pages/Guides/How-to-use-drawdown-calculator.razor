@page "/guides/how-to-use-drawdown-calculator"
@using Microsoft.AspNetCore.Components
@inject NavigationManager NavigationManager

<style>
    :root {
        --brand: #ffd600;
        --muted: #6c757d;
        --panel-bg: #fff9e6;
        --card-radius: 12px;
        --max-width: 980px;
    }

    .container-guide {
        max-width: var(--max-width);
        margin: 0 auto;
        padding: 32px 16px;
    }

    body .container-guide { padding-top: 0; }

    .hero {
        background: linear-gradient(90deg, rgba(255,214,0,0.12), rgba(255,214,0,0.02));
        border: 1px solid rgba(255,214,0,0.18);
        border-radius: var(--card-radius);
        padding: 22px;
        display: flex;
        gap: 18px;
        align-items: center;
        box-shadow: 0 8px 30px rgba(21,35,54,0.04);
    }

    .hero .title { font-weight:700; font-size:1.375rem; margin-bottom:6px; }
    .hero .subtitle { color:var(--muted); margin:0; }

    .section { margin-top:22px; }
    .card-guide { border-radius:12px; padding:18px; background:var(--panel-bg); border:1px solid rgba(255,214,0,0.12); }

    .steps .step { display:flex; gap:14px; align-items:flex-start; padding:12px 0; border-bottom:1px dashed rgba(0,0,0,0.04); }
    .steps .step:last-child { border-bottom:none; }
    .steps .step .num { width:40px; height:40px; min-width:40px; background:var(--brand); color:#111; border-radius:10px; display:flex; align-items:center; justify-content:center; font-weight:700; box-shadow:0 3px 10px rgba(0,0,0,0.06); }

    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; background:#f6f8fa; border:1px solid #e9ecef; padding:2px 6px; border-radius:6px; font-size:0.85rem; }
    .muted { color:var(--muted); }
    footer { margin-top:28px; color:var(--muted); font-size:0.9rem; text-align:center; }

    @@media (max-width:720px) {
        .hero { flex-direction:column; align-items:flex-start; gap:8px; }
    }
</style>

<div class="container-guide">
    <header class="hero mb-3">
        <div class="me-3">
            <div class="badge bg-success text-white rounded-pill px-3 py-2"><i class="bi bi-wallet2 me-2" aria-hidden="true"></i>Drawdown Planner</div>
        </div>
        <div>
            <div class="title">Guide — plan withdrawals and make your money last</div>
            <p class="subtitle">Learn how to set withdrawal strategy, tax-aware withdrawals, social security timing, and interpret sustainability metrics.</p>
        </div>
    </header>

    <main>
        <section class="section card-guide">
            <h4 class="mb-2">What this planner does</h4>
            <p class="muted mb-0">The Drawdown Planner simulates retirement withdrawals over time, showing how balances evolve under different withdrawal strategies, tax rules, and part-time income. Use it to test whether savings will last to your target age.</p>
        </section>

        <section class="section card-guide">
            <h5>Quick Start</h5>
            <div class="steps mt-3">
                <div class="step">
                    <div class="num">1</div>
                    <div>
                        <strong>Open the Drawdown planner</strong><br />
                        Click: <button class="btn btn-sm btn-outline-primary" @onclick="() => NavigationManager.NavigateTo('/retirement-drawdown')">Open Drawdown Planner</button>
                    </div>
                </div>

                <div class="step">
                    <div class="num">2</div>
                    <div>
                        <strong>Enter balances</strong><br />
                        Fill in Post-tax, Traditional and Roth balances at retirement (these determine available funds and tax impacts).
                    </div>
                </div>

                <div class="step">
                    <div class="num">3</div>
                    <div>
                        <strong>Choose withdrawal strategy</strong><br />
                        Select a fixed amount, percentage of balance, or inflation-adjusted withdrawals and set account priority (tax-optimized or custom order).
                    </div>
                </div>

                <div class="step">
                    <div class="num">4</div>
                    <div>
                        <strong>Set Social Security ages</strong><br />
                        Enter planned claim ages and monthly benefits — timing materially affects cashflow and taxes.
                    </div>
                </div>

                <div class="step">
                    <div class="num">5</div>
                    <div>
                        <strong>Calculate and review</strong><br />
                        Hit Calculate. Review totals, final balances, sustainability, and the year-by-year breakdown to see when money may run out.
                    </div>
                </div>
            </div>
        </section>

        <section class="section card-guide">
            <h5>Interpreting results</h5>
            <ul>
                <li><strong>Final Balance</strong> — shows remaining assets at plan end.</li>
                <li><strong>Money Lasts Until</strong> — age when funds are depleted ("Lifetime" if sustainable).</li>
                <li><strong>Investment Growth</strong> — total earnings across accounts over the plan.</li>
                <li><strong>Taxes Paid</strong> — cumulative tax on traditional withdrawals; tax strategy impacts this.</li>
            </ul>
        </section>

        <section class="section card-guide">
            <h5>Tips & best practices</h5>
            <ul>
                <li>Delaying Social Security typically increases benefits but may require larger early withdrawals.</li>
                <li>Tax-optimized withdrawal ordering can extend portfolio life by reducing taxable distributions.</li>
                <li>Test different investment return and inflation scenarios to gauge sensitivity.</li>
                <li>Use partial retirement income to reduce early withdrawals and extend sustainability.</li>
            </ul>
        </section>

        <section class="section card-guide">
            <h5>FAQ</h5>
            <dl class="row">
                <dt class="col-sm-4">Can I change withdrawal order?</dt>
                <dd class="col-sm-8">Yes — choose Custom Order and set the sequence (Post-Tax, Traditional, Roth).</dd>

                <dt class="col-sm-4">How is tax calculated?</dt>
                <dd class="col-sm-8">Taxes are applied to traditional withdrawals at the specified Traditional Tax Rate. Post-tax and Roth withdrawals are tax-free in typical scenarios.</dd>

                <dt class="col-sm-4">What if results show money runs out?</dt>
                <dd class="col-sm-8">Reduce withdrawal amounts, delay Social Security, shift to more tax-efficient withdrawals, or adjust investment assumptions.</dd>
            </dl>
        </section>

        <section class="section card-guide">
            <h5>Further reading</h5>
            <p class="muted mb-0">Consider exploring resources on withdrawal strategies (4% rule, dynamic spending), tax-efficient distributions, and Social Security optimization to deepen your planning.</p>
        </section>
    </main>

    <footer>
        <div>© REWealthen • Drawdown Planner Guide</div>
    </footer>
</div>
