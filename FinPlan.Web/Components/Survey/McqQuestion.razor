@using FinPlan.Web.Components.Models
@using Microsoft.AspNetCore.Components

<div class="mb-3">
    <label class="form-label fw-semibold">@Question.QuestionText</label>
    @if (Question.Options?.Count > 0)
    {
        <div class="mt-2">
            <div class="d-flex flex-wrap">
                @foreach (var opt in Question.Options)
                {
                    var isSelected = string.Equals(opt, SelectedValue, StringComparison.Ordinal);
                    <button type="button"
                            class="btn @(isSelected ? "btn-primary" : "btn-outline-secondary") btn-sm me-2 mb-2"
                            aria-pressed="@(isSelected.ToString().ToLower())"
                            @onclick="() => OnSelect(opt)">
                        @opt
                    </button>
                }
            </div>
        </div>
    }
</div>

@code {
    [Parameter]
    public SurveyQuestion Question { get; set; } = default!;

    [Parameter]
    public string SelectedValue { get; set; } = string.Empty;

    [Parameter]
    public EventCallback<string> Selected { get; set; }

    private async Task OnSelect(string opt)
    {
        await Selected.InvokeAsync(opt);
    }
}
